(this["webpackJsonponline-gpg"]=this["webpackJsonponline-gpg"]||[]).push([[0],{127:function(e,t,a){e.exports=a(290)},133:function(e,t,a){},135:function(e,t,a){},290:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(4),i=a.n(r),o=(a(132),a(133),a(7)),c=a.n(o),l=a(25),p=a(19),u=a(20),h=a(22),d=a(21),y=a(23),m=(a(135),a(108)),f=a.n(m),b=a(295),v=a(296),g=a(297),k=a(294),E=a(293),w=a(54),C=a.n(w),O=function(e){function t(e){var a;Object(p.a)(this,t);var n=(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).props,s=n.onOk,r=n.onCancel;return a.onOk=s,a.onCancel=r,a.state={email:"",passphrase:""},a}return Object(y.a)(t,e),Object(u.a)(t,[{key:"isValidEmail",value:function(e){return C.a.isEmail(e)}},{key:"okPressed",value:function(){this.onOk({email:this.state.email,passphrase:this.state.passphrase})}},{key:"cancelPressed",value:function(){this.onCancel()}},{key:"render",value:function(){var e=this;return s.a.createElement(k.a,{title:"Provide key data",okText:"Generate",cancelButtonProps:{ghost:!0},bodyStyle:{backgroundColor:"#333842",color:"white"},visible:this.props.visible,onOk:this.okPressed.bind(this),okButtonProps:{default:!0,disabled:!this.state.email||!this.state.passphrase},okType:"default",onCancel:this.cancelPressed.bind(this)},s.a.createElement("p",{className:"form-title"},"E-mail"),s.a.createElement(E.a,{placeholder:"E-mail",onChange:function(t){e.isValidEmail(t.target.value)&&e.setState({email:t.target.value})}}),s.a.createElement("p",{className:"form-title"},"Passphrase"),s.a.createElement(E.a.Password,{placeholder:"Passphrase",onChange:function(t){return e.setState({passphrase:t.target.value})}}))}}]),t}(n.Component),P=function(e){function t(e){var a;Object(p.a)(this,t);var n=(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).props,s=n.onOk,r=n.onCancel;return a.onOk=s,a.onCancel=r,a.state={passphrase:""},a}return Object(y.a)(t,e),Object(u.a)(t,[{key:"isValidEmail",value:function(e){return C.a.isEmail(e)}},{key:"okPressed",value:function(){this.onOk({passphrase:this.state.passphrase})}},{key:"cancelPressed",value:function(){this.onCancel()}},{key:"render",value:function(){var e=this;return s.a.createElement(k.a,{title:"Provide passphrase",okText:"Set",cancelButtonProps:{ghost:!0},bodyStyle:{backgroundColor:"#333842",color:"white"},visible:this.props.visible,onOk:this.okPressed.bind(this),okButtonProps:{default:!0,disabled:!this.state.passphrase},okType:"default",onCancel:this.cancelPressed.bind(this)},s.a.createElement("p",{className:"form-title"},"Passphrase"),s.a.createElement(E.a.Password,{placeholder:"Passphrase",onChange:function(t){return e.setState({passphrase:t.target.value})}}))}}]),t}(n.Component),x=a(6),M=a(29),j=a(292),K=function(e){function t(e){var a;Object(p.a)(this,t);var n=(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).props,s=n.onButtonPress,r=n.title;return a.title=r,a.onButtonPress=s,a}return Object(y.a)(t,e),Object(u.a)(t,[{key:"buttonClicked",value:function(e){this.onButtonPress(e)}},{key:"componentDidMount",value:function(){this.loadingIcon=s.a.createElement(x.a,{type:"loading",style:{fontSize:24},spin:!0})}},{key:"render",value:function(){var e=this;return s.a.createElement("header",null,s.a.createElement("h1",{className:"header"},s.a.createElement(x.a,{type:"container"}),s.a.createElement("span",{className:"title"},this.title)),s.a.createElement(v.a,{className:"row",type:"flex",justify:"center",gutter:[0,100]},s.a.createElement(g.a,{span:6},s.a.createElement("div",{className:"menu"},s.a.createElement(M.a,{ghost:!0,className:"menu-button",onClick:function(){e.buttonClicked("generate")}},this.props.loading.generate?s.a.createElement(j.a,{indicator:this.loadingIcon}):"Generate keys"),s.a.createElement(M.a,{ghost:!0,className:"menu-button",onClick:function(){e.buttonClicked("encrypt")}},this.props.loading.encrypt?s.a.createElement(j.a,{indicator:this.loadingIcon}):"Encrypt"),s.a.createElement(M.a,{ghost:!0,className:"menu-button",onClick:function(){e.buttonClicked("decrypt")}},this.props.loading.decrypt?s.a.createElement(j.a,{indicator:this.loadingIcon}):"Decrypt")))))}}]),t}(n.Component),S=a(122),B=E.a.TextArea,N=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(u.a)(t,[{key:"copyToClipboard",value:function(){this.showNotification("success",this.props.name+" copied!","")}},{key:"download",value:function(e,t){var a=document.createElement("a"),n=new Blob([e],{type:"text/plain"});a.href=URL.createObjectURL(n),a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(B,{autoSize:{minRows:10,maxRows:10},placeholder:this.props.placeholder,className:"key-input",value:this.props.text,onChange:function(t){e.props.onChange({value:t.target.value})}}),s.a.createElement(S.CopyToClipboard,{onCopy:function(){e.copyToClipboard()},text:this.props.text},s.a.createElement(M.a,{className:"textarea-button",ghost:!0},"Copy")),s.a.createElement(M.a,{className:"textarea-button",ghost:!0,onClick:function(){e.download(e.props.text,e.props.filename||e.props.name)}},"Download"))}}]),t}(n.Component),V=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(h.a)(this,Object(d.a)(t).call(this))).state={privateKey:"",publicKey:"",encryptedMessage:"",decryptedMessage:"",passphrase:"",email:"",loading:{generate:!1,encrypt:!1,decrypt:!1},generateKeysModalVisible:!1,passphraseModalVisible:!1},e}return Object(y.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.gpgManager=new f.a({rsaKeyBits:4096});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"showError",value:function(e){this.showNotification("error","Error",e)}},{key:"showNotification",value:function(e,t,a){b.a[e]({message:t,description:a,duration:3})}},{key:"generateKeys",value:function(){var e=Object(l.a)(c.a.mark((function e(t){var a,n,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.gpgManager.generateKeyPair({passphrase:t.passphrase,user:{email:t.email,name:t.email}});case 3:a=e.sent,n=a.privateKey,s=a.publicKey,this.setState({publicKey:s,privateKey:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),this.showError("Could not generate keys");case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"encrypt",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.publicKey){e.next=2;break}return e.abrupt("return",this.showError("Please provide public key"));case 2:if(this.state.decryptedMessage){e.next=4;break}return e.abrupt("return",this.showError("Please provide message"));case 4:return e.prev=4,e.next=7,this.gpgManager.encrypt({publicKey:this.state.publicKey,signMessage:!1,message:this.state.decryptedMessage});case 7:t=e.sent,this.setState({encryptedMessage:t}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),this.showError("Could not encrypt message. Check if public key is correct");case 14:case"end":return e.stop()}}),e,this,[[4,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"decrypt",value:function(){var e=Object(l.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.privateKey){e.next=2;break}return e.abrupt("return",this.showError("Please provide private key"));case 2:if(this.state.encryptedMessage){e.next=4;break}return e.abrupt("return",this.showError("Please provide encrypted message"));case 4:return e.prev=4,e.next=7,this.gpgManager.decrypt({verify:!1,privateKey:this.state.privateKey,passphrase:t.passphrase,encryptedMessage:this.state.encryptedMessage});case 7:a=e.sent,this.setState({decryptedMessage:a}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),"Incorrect key passphrase"===e.t0.message&&this.setState({passphraseModalVisible:!0}),this.showError("Could not decrypt message. Check if provided data is correct");case 15:case"end":return e.stop()}}),e,this,[[4,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onGenerateKeysModalOk",value:function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({email:t.email,passphrase:t.passphrase,generateKeysModalVisible:!1,loading:{generate:!0}}),e.next=3,this.generateKeys(t);case 3:this.setState({loading:{generate:!1}});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onGenerateKeysModalCancel",value:function(){this.setState({generateKeysModalVisible:!1})}},{key:"onPassphraseModalOk",value:function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({passphrase:t.passphrase,passphraseModalVisible:!1,loading:{decrypt:!0}}),e.next=3,this.decrypt(t);case 3:this.setState({loading:{decrypt:!1}});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onPassphraseModalCancel",value:function(){this.setState({passphraseModalVisible:!1})}},{key:"onGenerateButtonPress",value:function(){this.setState({generateKeysModalVisible:!0})}},{key:"onEcryptButtonPress",value:function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:{encrypt:!0}}),e.next=3,this.encrypt();case 3:this.setState({loading:{encrypt:!1}});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onDecryptButtonPress",value:function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.passphrase){e.next=3;break}return this.setState({passphraseModalVisible:!0}),e.abrupt("return");case 3:return this.setState({loading:{decrypt:!0}}),e.next=6,this.decrypt({passphrase:this.state.passphrase});case 6:this.setState({loading:{decrypt:!1}});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onTopBarButtonPress",value:function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="generate"===e.t0?3:"encrypt"===e.t0?6:"decrypt"===e.t0?9:12;break;case 3:return e.next=5,this.onGenerateButtonPress();case 5:return e.abrupt("break",13);case 6:return e.next=8,this.onEcryptButtonPress();case 8:return e.abrupt("break",13);case 9:return e.next=11,this.onDecryptButtonPress();case 11:case 12:return e.abrupt("break",13);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement(K,{title:"Online PGP",onButtonPress:this.onTopBarButtonPress.bind(this),loading:this.state.loading}),s.a.createElement(O,{visible:this.state.generateKeysModalVisible,onOk:this.onGenerateKeysModalOk.bind(this),onCancel:this.onGenerateKeysModalCancel.bind(this)}),s.a.createElement(P,{visible:this.state.passphraseModalVisible,onOk:this.onPassphraseModalOk.bind(this),onCancel:this.onPassphraseModalCancel.bind(this)}),s.a.createElement(v.a,{className:"row",type:"flex",justify:"space-around",gutter:[0,100]},s.a.createElement(g.a,{span:8},s.a.createElement(N,{name:"Private key",placeholder:"Paste private key here",filename:"private.key",text:this.state.privateKey,onChange:function(t){e.setState({privateKey:t.value})}})),s.a.createElement(g.a,{span:8},s.a.createElement(N,{name:"Public key",placeholder:"Paste public key here",filename:"public.key",text:this.state.publicKey,onChange:function(t){e.setState({publicKey:t.value})}}))),s.a.createElement(v.a,{className:"row",type:"flex",justify:"space-around",gutter:[0,100]},s.a.createElement(g.a,{span:8},s.a.createElement(N,{name:"Message",placeholder:"Paste message here",filename:"message.txt",text:this.state.decryptedMessage,onChange:function(t){e.setState({decryptedMessage:t.value})}})),s.a.createElement(g.a,{span:8},s.a.createElement(N,{name:"Encrypted message",placeholder:"Paste encrypted message here",filename:"encrypted.gpg",text:this.state.encryptedMessage,onChange:function(t){e.setState({encryptedMessage:t.value})}}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[127,1,2]]]);
//# sourceMappingURL=main.f60f1ed7.chunk.js.map