(this["webpackJsonponline-gpg"]=this["webpackJsonponline-gpg"]||[]).push([[0],{126:function(e,t,a){e.exports=a(289)},132:function(e,t,a){},134:function(e,t,a){},289:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(4),o=a.n(r),i=(a(131),a(132),a(18)),c=a.n(i),l=a(39),p=a(102),u=a(103),h=a(121),d=a(104),y=a(123),m=(a(134),a(105)),g=a.n(m),b=a(40),f=a(293),v=a(6),k=a(295),E=a(296),w=a(297),C=a(23),x=a(292),M=a(294),K=a(113),P=a.n(K),N=f.a.TextArea,S=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(h.a)(this,Object(d.a)(t).call(this))).state={privateKey:"",publicKey:"",encryptedMessage:"",decryptedMessage:"",passphrase:"",username:"test@example.com",email:"",loading_generate:!1,loading_encrypt:!1,loading_decrypt:!1,generateKeysModalVisible:!1,passphraseModalVisible:!1},e}return Object(y.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.gpgManager=new g.a({rsaKeyBits:4096}),this.loadingIcon=n.a.createElement(v.a,{type:"loading",style:{fontSize:24},spin:!0});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"showError",value:function(e){this.showNotification("error","Error",e)}},{key:"showNotification",value:function(e,t,a){k.a[e]({message:t,description:a,duration:3,onClick:function(){}})}},{key:"showGenerateKeysModal",value:function(){this.setState({generateKeysModalVisible:!0})}},{key:"hideGenerateKeysModal",value:function(){this.setState({generateKeysModalVisible:!1})}},{key:"showPassphraseModal",value:function(){this.setState({passphraseModalVisible:!0})}},{key:"hidePassphraseModal",value:function(){this.setState({passphraseModalVisible:!1})}},{key:"generateKeys",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t,a,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.hideGenerateKeysModal(),this.setState({loading_generate:!0}),e.prev=2,e.next=5,this.gpgManager.generateKeyPair({passphrase:this.state.passphrase,user:{email:this.state.email,name:this.state.username}});case 5:t=e.sent,a=t.privateKey,s=t.publicKey,this.setState({publicKey:s,privateKey:a}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),this.showError("Could not generate keys");case 14:this.setState({loading_generate:!1});case 15:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"encrypt",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.publicKey){e.next=2;break}return e.abrupt("return",this.showError("Please provide public key"));case 2:if(this.state.decryptedMessage){e.next=4;break}return e.abrupt("return",this.showError("Please provide message"));case 4:return this.setState({loading_encrypt:!0}),e.prev=5,e.next=8,this.gpgManager.encrypt({publicKey:this.state.publicKey,signMessage:!1,message:this.state.decryptedMessage});case 8:t=e.sent,this.setState({encryptedMessage:t}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),this.showError("Could not encrypt message. Check if public key is correct");case 15:this.setState({loading_encrypt:!1});case 16:case"end":return e.stop()}}),e,this,[[5,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"decrypt",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hidePassphraseModal(),this.state.privateKey){e.next=3;break}return e.abrupt("return",this.showError("Please provide private key"));case 3:if(this.state.encryptedMessage){e.next=5;break}return e.abrupt("return",this.showError("Please provide encrypted message"));case 5:return this.setState({loading_decrypt:!0}),e.prev=6,e.next=9,this.gpgManager.decrypt({verify:!1,privateKey:this.state.privateKey,passphrase:this.state.passphrase,encryptedMessage:this.state.encryptedMessage});case 9:t=e.sent,this.setState({decryptedMessage:t}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),this.showError("Could not decrypt message. Check if provided data is correct");case 16:this.setState({loading_decrypt:!1});case 17:case"end":return e.stop()}}),e,this,[[6,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"copyToClipboard",value:function(e){this.showNotification("success",e+" copied!","")}},{key:"download",value:function(e,t){var a=document.createElement("a"),s=new Blob([e],{type:"text/plain"});a.href=URL.createObjectURL(s),a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a)}},{key:"isValidEmail",value:function(e){return P.a.isEmail(e)}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"App"},n.a.createElement("h1",{className:"header"},n.a.createElement(v.a,{type:"container"}),n.a.createElement("span",{className:"title"},"Online PGP")),n.a.createElement(E.a,{className:"row",type:"flex",justify:"center",gutter:[0,100]},n.a.createElement(w.a,{span:6},n.a.createElement("div",{className:"menu"},n.a.createElement(C.a,{ghost:!0,className:"menu-button",onClick:this.showGenerateKeysModal.bind(this)},this.state.loading_generate?n.a.createElement(x.a,{indicator:this.loadingIcon}):"Generate keys"),n.a.createElement(M.a,{title:"Provide key data",okText:"Generate",cancelButtonProps:{ghost:!0},bodyStyle:{backgroundColor:"#333842",color:"white"},visible:this.state.generateKeysModalVisible,onOk:this.generateKeys.bind(this),okButtonProps:{default:!0,disabled:!this.state.email||!this.state.passphrase},okType:"default",onCancel:this.hideGenerateKeysModal.bind(this)},n.a.createElement("p",{className:"form-title"},"E-mail"),n.a.createElement(f.a,{placeholder:"E-mail",onChange:function(t){e.isValidEmail(t.target.value)&&e.setState({email:t.target.value})}}),n.a.createElement("p",{className:"form-title"},"Passphrase"),n.a.createElement(f.a.Password,{placeholder:"Passphrase",onChange:function(t){return e.setState({passphrase:t.target.value})}})),n.a.createElement(C.a,{ghost:!0,className:"menu-button",onClick:this.encrypt.bind(this)},this.state.loading_encrypt?n.a.createElement(x.a,{indicator:this.loadingIcon}):"Encrypt"),n.a.createElement(C.a,{ghost:!0,className:"menu-button",onClick:function(){e.state.passphrase?e.decrypt():e.showPassphraseModal()}},this.state.loading_decrypt?n.a.createElement(x.a,{indicator:this.loadingIcon}):"Decrypt"),n.a.createElement(M.a,{title:"Provide passphrase",okText:"Set",cancelButtonProps:{ghost:!0},bodyStyle:{backgroundColor:"#333842",color:"white"},visible:this.state.passphraseModalVisible,onOk:this.decrypt.bind(this),okButtonProps:{default:!0,disabled:!this.state.passphrase},okType:"default",onCancel:this.hidePassphraseModal.bind(this)},n.a.createElement("p",{className:"form-title"},"Passphrase"),n.a.createElement(f.a.Password,{placeholder:"Passphrase",onChange:function(t){return e.setState({passphrase:t.target.value})}}))))),n.a.createElement(E.a,{className:"row",type:"flex",justify:"space-around",gutter:[0,100]},n.a.createElement(w.a,{span:8},n.a.createElement(N,{autoSize:{minRows:10,maxRows:10},placeholder:"Paste private key here",className:"key-input",value:this.state.privateKey,onChange:function(t){return e.setState({privateKey:t.target.value})}}),n.a.createElement(b.CopyToClipboard,{onCopy:function(){e.copyToClipboard("Private key")},text:this.state.privateKey},n.a.createElement(C.a,{className:"textarea-button",ghost:!0},"Copy")),n.a.createElement(C.a,{className:"textarea-button",ghost:!0,onClick:function(){e.download(e.state.privateKey,"private.key")}},"Download")),n.a.createElement(w.a,{span:8},n.a.createElement(N,{autoSize:{minRows:10,maxRows:10},placeholder:"Paste public key here",className:"key-input",value:this.state.publicKey,onChange:function(t){return e.setState({publicKey:t.target.value})}}),n.a.createElement(b.CopyToClipboard,{onCopy:function(){e.copyToClipboard("Public key")},text:this.state.publicKey},n.a.createElement(C.a,{className:"textarea-button",ghost:!0},"Copy")),n.a.createElement(C.a,{className:"textarea-button",ghost:!0,onClick:function(){e.download(e.state.publicKey,"public.key")}},"Download"))),n.a.createElement(E.a,{className:"row",type:"flex",justify:"space-around",gutter:[0,100]},n.a.createElement(w.a,{span:8},n.a.createElement(N,{autoSize:{minRows:10,maxRows:10},placeholder:"Paste plain text message here",className:"key-input",value:this.state.decryptedMessage,onChange:function(t){return e.setState({decryptedMessage:t.target.value})}}),n.a.createElement(b.CopyToClipboard,{onCopy:function(){e.copyToClipboard("Message")},text:this.state.decryptedMessage},n.a.createElement(C.a,{className:"textarea-button",ghost:!0},"Copy")),n.a.createElement(C.a,{className:"textarea-button",ghost:!0,onClick:function(){e.download(e.state.decryptedMessage,"message.txt")}},"Download")),n.a.createElement(w.a,{span:8},n.a.createElement(N,{autoSize:{minRows:10,maxRows:10},placeholder:"Paste encrypted message here",className:"key-input",value:this.state.encryptedMessage,onChange:function(t){return e.setState({encryptedMessage:t.target.value})}}),n.a.createElement(b.CopyToClipboard,{onCopy:function(){e.copyToClipboard("Encrypted message")},text:this.state.encryptedMessage},n.a.createElement(C.a,{className:"textarea-button",ghost:!0},"Copy")),n.a.createElement(C.a,{className:"textarea-button",ghost:!0,onClick:function(){e.download(e.state.encryptedMessage,"encrypted.txt")}},"Download"))))}}]),t}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[126,1,2]]]);
//# sourceMappingURL=main.522424d2.chunk.js.map